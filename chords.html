<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∞–∫–∫–æ—Ä–¥–æ–≤</title>
    <link rel="stylesheet" href="CSS/index.css">
    <style>
        /* –°—Ç—É–ø–µ–Ω–∏ - –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .steps-panel {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 8px;
        }
        
        .step-btn {
            padding: 12px;
            background: #f0f8ff;
            border: 2px solid #3498db;
            border-radius: 6px;
            color: #3498db;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .step-btn:hover {
            background: #e0f0ff;
        }
        
        .step-btn.active {
            background: #3498db;
            color: white;
        }
        
        /* –°–ø–∏—Å–æ–∫ –∞–∫–∫–æ—Ä–¥–æ–≤ - —Å—Ä–µ–¥–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .chords-panel {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 80px;
            z-index: 90;
            display: none;
        }
        
        .chords-panel.show {
            display: block;
        }
        
        .chords-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 8px;
        }
        
        .chord-btn {
            padding: 10px 8px;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 6px;
            color: #856404;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            white-space: nowrap;
        }
        
        .chord-btn:hover {
            background: #ffe69c;
        }
        
        .chord-btn.active {
            background: #ffc107;
            color: #000;
        }
        
        /* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫–∫–æ—Ä–¥–∞ - –Ω–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .chord-display {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            display: none;
        }
        
        .chord-display.show {
            display: block;
        }
        
        .chord-name {
            font-size: 2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .chord-description {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
        }
        
        .chord-image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
        
        .chord-image {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .empty-state {
            background: white;
            border-radius: 8px;
            padding: 60px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            color: #999;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .empty-state-text {
            font-size: 1.2rem;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 600px) {
            .steps-grid {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .chords-grid {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }
            
            .chord-name {
                font-size: 1.5rem;
            }
            
            .chord-description {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="header-nav">
            <a href="index.html" class="header-cell">–ê–ë–í</a>
            <a href="index_full.html" class="header-cell">–í—Å–µ</a>
            <a href="topics.html" class="header-cell">–¢–µ–º—ã</a>
            <a href="books.html" class="header-cell">–ö–Ω–∏–≥–∏</a>
            <a href="today.html" class="header-cell">–°–µ–≥–æ–¥–Ω—è</a>
            <a href="search.html" class="header-cell">
                <img src="search.png" alt="–ü–æ–∏—Å–∫">
            </a>
        </div>
        
        <!-- –ü–∞–Ω–µ–ª—å —Å—Ç—É–ø–µ–Ω–µ–π (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞) -->
        <div class="steps-panel">
            <div class="steps-grid" id="stepsGrid"></div>
        </div>
        
        <!-- –ü–∞–Ω–µ–ª—å –∞–∫–∫–æ—Ä–¥–æ–≤ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å—Ç—É–ø–µ–Ω–∏) -->
        <div class="chords-panel" id="chordsPanel">
            <div class="chords-grid" id="chordsGrid"></div>
        </div>
        
        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∞–∫–∫–æ—Ä–¥–∞ -->
        <div class="chord-display" id="chordDisplay">
            <div class="chord-name" id="chordName"></div>
            <div class="chord-description" id="chordDescription"></div>
            <div class="chord-image-container">
                <img class="chord-image" id="chordImage" alt="–ê–∫–∫–æ—Ä–¥">
            </div>
        </div>
        
        <!-- –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø—É—Å—Ç–æ) -->
        <div class="empty-state" id="emptyState">
            <div class="empty-state-icon">üéπ</div>
            <div class="empty-state-text">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—É–ø–µ–Ω—å, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∞–∫–∫–æ—Ä–¥—ã</div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∞–∫–∫–æ—Ä–¥–æ–≤ (–±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ JSON)
        let chordsData = null;
        let currentStep = null;
        let currentChord = null;
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        async function loadChordsData() {
            try {
                const response = await fetch('chords_data.json');
                if (!response.ok) {
                    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–æ—Ä–¥–æ–≤');
                }
                chordsData = await response.json();
                initializeSteps();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                document.getElementById('emptyState').innerHTML = `
                    <div class="empty-state-icon">‚ö†Ô∏è</div>
                    <div class="empty-state-text">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–æ—Ä–¥–æ–≤.<br>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.</div>
                `;
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–Ω–µ–ª–∏ —Å—Ç—É–ø–µ–Ω–µ–π
        function initializeSteps() {
            const stepsGrid = document.getElementById('stepsGrid');
            stepsGrid.innerHTML = '';
            
            chordsData.steps.forEach(step => {
                if (chordsData.chords[step] && chordsData.chords[step].length > 0) {
                    const btn = document.createElement('button');
                    btn.className = 'step-btn';
                    btn.textContent = step;
                    btn.onclick = () => selectStep(step);
                    stepsGrid.appendChild(btn);
                }
            });
        }
        
        // –í—ã–±–æ—Ä —Å—Ç—É–ø–µ–Ω–∏
        function selectStep(step) {
            currentStep = step;
            currentChord = null;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É —Å—Ç—É–ø–µ–Ω–∏
            document.querySelectorAll('.step-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === step);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∞–∫–∫–æ—Ä–¥–æ–≤
            displayChords(step);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫–∫–æ—Ä–¥–∞
            document.getElementById('chordDisplay').classList.remove('show');
            document.getElementById('emptyState').style.display = 'block';
            document.getElementById('emptyState').innerHTML = `
                <div class="empty-state-icon">üéº</div>
                <div class="empty-state-text">–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–æ—Ä–¥ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ</div>
            `;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫–∫–æ—Ä–¥–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—É–ø–µ–Ω–∏
        function displayChords(step) {
            const chordsGrid = document.getElementById('chordsGrid');
            const chordsPanel = document.getElementById('chordsPanel');
            
            chordsGrid.innerHTML = '';
            
            const chords = chordsData.chords[step];
            chords.forEach(chord => {
                const btn = document.createElement('button');
                btn.className = 'chord-btn';
                btn.textContent = chord.name;
                btn.onclick = () => selectChord(chord);
                chordsGrid.appendChild(btn);
            });
            
            chordsPanel.classList.add('show');
        }
        
        // –í—ã–±–æ—Ä –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫–∫–æ—Ä–¥–∞
        function selectChord(chord) {
            currentChord = chord;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –∞–∫–∫–æ—Ä–¥–∞
            document.querySelectorAll('.chord-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === chord.name);
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            document.getElementById('emptyState').style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫–∫–æ—Ä–¥
            const chordDisplay = document.getElementById('chordDisplay');
            document.getElementById('chordName').textContent = chord.name;
            document.getElementById('chordDescription').textContent = chord.description;
            
            const img = document.getElementById('chordImage');
            img.src = chord.image;
            img.alt = `${chord.name} - ${chord.description}`;
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            img.onerror = function() {
                this.src = 'data:image/svg+xml,' + encodeURIComponent(`
                    <svg width="186" height="377" xmlns="http://www.w3.org/2000/svg">
                        <rect width="186" height="377" fill="#f0f0f0"/>
                        <text x="93" y="188" text-anchor="middle" font-family="Arial" font-size="16" fill="#999">
                            –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ<tspan x="93" dy="20">–Ω–µ –Ω–∞–π–¥–µ–Ω–æ</tspan>
                        </text>
                    </svg>
                `);
            };
            
            chordDisplay.classList.add('show');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadChordsData);
    </script>
</body>
</html>
